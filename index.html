<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#f5f7fa">
    <title>Tides Over Sand</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="app">
        <header class="header">
            <div class="header-content">
                <div class="header-text">
                    <h1 class="app-title">Tides Over Sand</h1>
                </div>
                <div class="auth-section">
                    <div id="authStatus" class="auth-status" style="display: none;">
                        <span id="userInfo" class="user-info"></span>
                        <button id="signOutBtn" class="sign-out-btn">Sign Out</button>
                    </div>
                    <button id="signInBtn" class="sign-in-btn">Sign in with GitHub</button>
                </div>
            </div>
        </header>
        
        <main class="main-content">
            <div class="content-split">
                <div class="task-list-container">
                    <div class="task-list" id="taskList">
                        <!-- Tasks will be dynamically added here -->
                    </div>
                    
                    <div class="add-task-container">
                        <input type="text" id="newTaskInput" placeholder="Add a new task..." class="new-task-input">
                        <button id="addTaskBtn" class="add-task-btn">+</button>
                    </div>
                </div>
                
                <div class="task-detail-panel" id="taskDetailPanel">
                    <div class="task-detail-content" id="taskDetailContent">
                        <button class="close-detail-btn" id="closeDetailPanel">&times;</button>
                        <div class="task-detail-body">
                            <div class="task-title-section">
                                <input type="text" id="detailTaskTitle" class="task-title-input" placeholder="Task title...">
                            </div>
                            
                            <div class="task-body-section">
                                <div id="detailTaskBodyPreview" class="task-body-preview active" onclick="app.focusTextarea()"></div>
                                <textarea id="detailTaskBody" class="task-body-textarea" placeholder="Add details... (Markdown supported)" onblur="app.blurTextarea()"></textarea>
                            </div>
                            
                            <div class="task-meta-section">
                                <div class="lifetime-footer">
                                    <div class="lifetime-info">
                                        <span class="lifetime-label">Lifetime:</span>
                                        <span id="detailLifetimeValue" class="lifetime-value" onclick="app.editLifetime()"></span>
                                        <input id="detailLifetimeInput" class="lifetime-input" type="number" min="0" max="4" style="display: none;" onblur="app.saveLifetime()" onkeypress="app.handleLifetimeKeypress(event)">
                                        <button id="detailRenewTaskBtn" class="renew-btn" style="display: none;">Renew</button>
                                    </div>
                                    <button id="detailDeleteTaskBtn" class="delete-btn">Delete</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="philosophy-section">
                <h3 class="philosophy-title">A To Do List That Helps You <strong>Forget</strong></h3>
                <p>Traditional To Do lists feel helpful at first but eventually become burdens. When capturing tasks outpaces our ability to complete them, we find ourselves in a death grip with our own lists, constantly maintaining them instead of focusing on what matters.</p>
                
                <p>TOS is a proof of concept inspired by writing in sand that is gradually erased by the tides. Tasks fade until they naturally disappear after 5 days. Similar to retracing faded writing in the sand to keep it around longer, they can be renewed before disappearing too. This pattern encourages focusing on what matters while remaining flexible to the ebb and flow of reality.</p>
                
                <p>Wonderful things happen when the default is to gently forget.</p>
                
                <p>Drag tasks up and down to renew them. Everything else works the way you'd expect.</p>
                
                <p><em>Note: This is a POC, but your data is fully persisted to your account and the app is fully functional. 
                Feel free to use across devices. For exploratory purposes only. Don't store sensitive or important data. Some features may not work on mobile.</em></p>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="footer">
            <a href="https://adamgrant.info" target="_blank" rel="noopener noreferrer">Made by Adam</a>
        </footer>
        
        <!-- Delete Notification -->
        <div class="delete-notification" id="deleteNotification" style="display: none;">
            <span id="deleteMessage">Task deleted</span>
            <button id="undoDeleteBtn" class="undo-btn">Undo</button>
        </div>
    </div>
    
    <script src="app.js"></script>
</body>
</html>
